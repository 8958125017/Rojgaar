<div class="dash-head">
  <p>Upload Document Search</p>
</div>
<div class="cleafix"></div>
<div>
  <div class="page-filters">
    <h2>
      <a href="javascript:void(0);">
        <i class="fa fa-filter" aria-hidden="true"></i> Apply Filters
        <span><i class="fa fa-chevron-down" aria-hidden="true"></i></span>
      </a>
    </h2>

    <div class="filter-wrapper">
      <form [formGroup]="candidate_form">
        <div class="form-group">
          <div class="col-md-3 col-sm-6 upload-auto-searchs">
            <label> Training Partner </label>
            <input #clear (click)="StatesSelectedclears()" formControlName="training_partner"
            typeaheadOptionField="stateName"  [(ngModel)]="PiaSelecteds"
            [typeahead]="GetPiaData"
            typeaheadOptionField="pia_Name"
            class="form-control"
            (typeaheadOnSelect)="StatesOnSelect($event)"
            placeholder="Training Partner ...">
          </div>

          <div class="col-md-3 col-sm-6">
            <label>  Training Center Name </label>
            <input type="text" class="form-control" formControlName="Tcname"  placeholder="Training Center Name...">
          </div>

          <div class="col-md-3 col-sm-6">
            <label> State </label>
            <select (change)="GetAllDistrict($event.target.value)" class="form-control" formControlName="domicile_state">
              <option value="">Select State</option>
              <option *ngFor="let state of states" [value]="state.id">{{ state.stateName}}</option>
            </select>
          </div>
          <div class="col-md-3 col-sm-6">
            <label> District</label>
            <select class="form-control" formControlName="domicile_district">
              <option value="">Select District</option>
              <option *ngFor="let district of districts" [value]="district.id">{{ district.districtName}}</option>
            </select>
          </div>
        </div>
        <div class="form-group">
          <div class="col-md-3 col-sm-6">
            <label>Sector</label>
            <select formControlName="sector" class="form-control" (change)="GetAllTrades($event.target.value)">
              <option value="">Select Sector</option>
              <option *ngFor="let sector of sector" [value]="sector.id">{{ sector.name}}</option>
            </select>
          </div>
          <div class="col-md-3 col-sm-6">
            <label>Trade</label>
            <select formControlName="trade" class="form-control">
              <option value="">Select Trade</option>
              <option *ngFor="let trade of trade" [value]="trade.tradeCode">{{ trade.tradeName}}</option>
            </select>
          </div>
          <div class="col-md-3 col-sm-6">
            <label>Age</label>
            <select formControlName="candage" class="form-control">
              <option value="">Select Age</option>
              <option [value]="'15'+'-'+'25'">15-25</option>
              <option [value]="'26'+'-'+'35'">26-35</option>
              <option [value]="'36'+'-'+'45'">36-45</option>
              <option [value]="45">45 & above</option>
            </select>
          </div>
          <div class="col-md-3 col-sm-6">
            <label>Gender</label>
            <div class="cleafix"></div>
            <span>
              <input type="radio" name="Gender" formControlName="Gender" id="Gender-1" value="Male" /> Male
            </span>
            <span class="">
              <input type="radio" name="Gender" formControlName="Gender" id="Gender-2" value="Female" /> Female
            </span>
            <span class="">
              <input type="radio" name="Gender" formControlName="Gender" id="Gender-3" value="Transgender" />
              Transgender
            </span>
            <span class="">
              <input type="radio" name="Gender" formControlName="Gender" id="Gender-4" value="" /> All
            </span>
          </div>
        </div> 
        <div class="row text-center m-t-5">
            <button type="button" (click)="ResetFilterResult()" class="btn btn-w-shadow no-rd">Reset</button>
          <button class="btn btn-w-shadow no-rd" type="submit" (click)="submit(0,'')">Search</button>

          <!--<button class="btn yl-btn" type="submit" (click)="submit(0,'')">Filter</button>-->
        </div>
      </form>
    </div>
  </div>
</div>
<div class="cleafix"></div>
<div class="col-md-12">
  <div *ngIf="showsearchresult!=''" class="col-md-12 jd-detail job-wrapper searchResults">

    <div class="form-group">
      <div class="row">
        <div class="col-md-12 col-sm-12 col-xs-12">
          <h4 class="m-b-0">Search Result</h4>
        </div>
      </div>
    </div>

    <div class="form-group">
      <div class="row">
          <div class="col-md-3 col-sm-6 col-xs-12">
          <span class="text-strong">Training Partner</span>: {{showsearchresult.Training_Partner}}
          </div> 
        <div class="col-md-3 col-sm-6 col-xs-12">
          <span class="text-strong">Training Center Name 
          </span>: {{showsearchresult.Tcname}}
        </div>
        <div class="col-md-3 col-sm-6 col-xs-12">
          <span class="text-strong">State</span>: {{showsearchresult.State}}
        </div>
        <div class="col-md-3 col-sm-6 col-xs-12">
          <span class="text-strong">District</span>: {{showsearchresult.District}}
        </div>
        
      </div>
    </div>
    <div class="form-group">
      <div class="row">
          <div class="col-md-3 col-sm-6 col-xs-12">
              <span class="text-strong">Sector</span>: {{showsearchresult.Sector}}
            </div>
            <div class="col-md-3 col-sm-6 col-xs-12">
              <span class="text-strong">Trade</span>: {{showsearchresult.Trade}}
            </div>
        <div class="col-md-3 col-sm-6 col-xs-12">
          <span class="text-strong">Age</span>: {{showsearchresult.Age}}
        </div>
        <div class="col-md-3 col-sm-6 col-xs-12">
          <span class="text-strong">Gender</span>: {{showsearchresult.Gender}}
        </div>
        <div class="col-md-3 col-sm-6 col-xs-12">
          <span class="text-strong">No of Records</span>: {{candidatelist.length}}
        </div>
        <div class="col-md-3 col-sm-6 col-xs-12">

        </div>
      </div>
    </div> 
  </div>
</div>

<div class="cleafix"></div>
<div class="col-md-12" *ngIf="candidatelist!=null">
  <h4 *ngIf="candidatelist?.length>0" style="text-align:center">Candidate Listing</h4>
  <div class="all-jobs-list">
    <div id="" class="searchResults">
      <ul class="joblist-wrapper">
        <li class="job-wrapper ps-relative candidate-searc-card" *ngFor="let cand of candidatelist;let i = index">
          
          <div class="job-view">
            <div class="p-l-0">
              <img onError="this.src='../../../../assets/images/NoImage.png'" src="{{cand.profileImage!=''?cand.profileImage:'assets/images/NoImage.png'}}"
                   class="img-thumbnail" alt="{{cand.profileImage!=''?cand.name:'No image'}}" width="60" height="40">
            </div>
            <div>
              {{cand.companyName}}
              <!--<a href="javascript:void(0)" (click)="viewcandidateProfile(cand.candidateID)" class="pull-right">View</a>-->
              <div class="clearfix"></div>
              {{cand.jobTitle}}
              <div class="clearfix"></div>

              <div class="form-group">
                <div class="row">
                  <div class="col-md-12">
                    <span class="text-strong">Name : </span> <span>{{cand.name}}</span>
                  </div>
                </div>
              </div>
              <div class="form-group">
                  <div class="row">
                    <div class="col-md-12">
                      <span class="text-strong">Father Name : </span> <span>{{cand.fatherName}}</span>
                    </div>
                  </div>
                </div>
                <div class="form-group">
                    <div class="row">
                      <div class="col-md-12">
                        <span class="text-strong">DOB  : </span> <span>{{cand.dob}}</span>
                      </div>
                    </div>
                  </div>
              <div class="form-group">
                <div class="row">
                  <div class="col-md-12">
                    <!-- <a href="javascript:void(0)" title="show" (click)="mobshow(cand.candidateID,mobv=!mobv)">
                      <span class="text-strong">
                        Mobile No. :
                      </span> <span>{{mobv==true && phone==cand.candidateID?cand.mobile:'XXX-XXX-XXXX'}}</span>

                    </a> -->
                      <span class="text-strong">
                        Mobile No. :
                      </span> <span>{{cand.mobile}}</span>



                  </div>
                </div>
              </div>
              <div class="form-group" *ngIf="cand.districtName">
                <div class="row">
                  <div class="col-md-12">
                    <span class="text-strong">District : </span> <span>{{cand.districtName}}</span>
                  </div>
                </div>
              </div>

              <div class="form-group" *ngIf="cand.stateName">
                <div class="row">
                  <div class="col-md-12">
                    <span class="text-strong">State : </span> <span>{{cand.stateName}}</span>
                  </div>
                </div>
              </div>

              <div class="form-group" *ngIf="cand.sectorName">
                <div class="row">
                  <div class="col-md-12">
                    <span class="text-strong">Sector : </span> <span>{{cand.sectorName}}</span>
                  </div>
                </div>
              </div>

              <div class="form-group" *ngIf="cand.tradeName">
                <div class="row">
                  <div class="col-md-12">
                    <span class="text-strong">Trade : </span> <span>{{cand.tradeName}}</span>
                  </div>
                </div>
              </div>

              <div class="form-group" *ngIf="cand.tcName">
                <div class="row">
                  <div class="col-md-12">
                    <span class="text-strong">Training Center Name : </span> <span>{{cand.tcName}}</span>
                  </div>
                </div>
              </div>
              <div class="form-group">
                <div class="job-list-action card-view-btns">
                  <a class="viewit" href="javascript:void(0)" title="Upload Document" (click)="viewcandidateProfile(cand.candidateID,cand.apitype,template,template2)">Upload Document</a>
                </div>
              </div>
            </div>
          </div> 
        </li>
      </ul>
    </div>
  </div>
</div>
<div class="cleafix"></div>

<ng-template #template>
  <div class="modal-header">
    <h6 class="modal-title pull-left">Candidate Details </h6>
    <button type="button" class="btn btn-w-shadow no-rd pull-right" aria-label="Close" (click)="modalRef.hide()">
      Close
    </button>
  </div>
  <div class="modal-body">
    <div class="col-md-12">

      <div class="job-view">
        <div>
          <figure class="text-center thumbnail">
            <br>
            <img onError="this.src='../../../../assets/images/NoImage.png'" src="{{candidatedetails.profileImage!=''?candidatedetails.profileImage:'assets/images/NoImage.png'}}"
                 alt="No image" />
            <figcaption>
              <br>
            </figcaption>
          </figure>
        </div>
        <div>
          <h6 class="job-title m-b-5">Personal Details</h6>
          <div class="form-group">
            <p class="col-md-6 lang-ellip" title="{{candidatedetails.name}}"><span class="text-strong">Name:</span> {{candidatedetails.name}}</p>
            <p class="col-md-6"><span class="text-strong">Date of Birth:</span> {{candidatedetails.dob | date: 'dd/MM/yyyy'}}</p>
          </div>
          <div class="form-group">
            <p class="col-md-6 lang-ellip" title="{{candidatedetails.email}}"><span class="text-strong">Email:</span> {{candidatedetails.email}}</p>
            <!-- <p class="col-md-6"><a href="javascript:void(0)" title="show" (click)="v =!v"><span><strong>Mobile No:</strong></span></a> {{v==true?candidatedetails.mobile:'XXX-XXX-XXXX'}} </p> -->
            <p class="col-md-6"><span><strong>Mobile No:</strong></span> {{candidatedetails.mobile}} </p>
          </div>
          <div class="form-group">
            <p class="col-md-6"><span class="text-strong">Gender:</span> {{candidatedetails.gender}}</p>
            <p class="col-md-6"><span class="text-strong">Religion:</span> {{candidatedetails.religion ? candidatedetails.religion :'NA'}}</p>
          </div>
          <div class="form-group">
            <p class="col-md-12"><span class="text-strong">About Me:</span>  {{candidatedetails.aboutMe ? candidatedetails.aboutMe : 'NA'}}</p>
          </div>
        </div>
      </div>
      <div class="cleafix margin-bottom-20"></div>
      <div class="dash-head dash-head-2" >
        <p>Upload Documents</p>
      </div>
      <div class="table-responsive">
        <form [formGroup]="candidate_document" (ngSubmit)="uploaddocument()">
        <table  class="table table-bordered table-striped margin-top-20">
          <thead class="bg-info">
            <tr>
              <th>Type</th>
              <th>Date</th>
              <th>Upload Document</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody>
            <tr >
              <td> 
                <select formControlName="doctype" class="form-control" (change)='ShowTextBox($event)'>
                  <option value="" class="" selected>Select Type</option>
                   <option [value]="doc.id" *ngFor="let doc of Documenttype">{{doc.documentname}}</option>
              </select>
              <errors [control]="candidate_document.controls.doctype"></errors>
              <input type="text" class="form-control" formControlName="TypeOther" maxlength="50"  *ngIf='displaytextBox'>
              <errors [control]="candidate_document.controls.TypeOther"></errors>
            </td> 
              <td>                   
                  <input type="text"
                         placeholder="Select Date" 
                         class="form-control 12"
                         formControlName="docdateyear" readonly
                         [bsConfig]="{ dateInputFormat: 'DD/MM/YYYY', showWeekNumbers:false, beforeShowDay:false,minMode:'month', adaptivePosition: true }"
                          #dp="bsDatepicker"
                           bsDatepicker
                           placement="top">
                  <errors [control]="candidate_document.controls.docdateyear"></errors>
            </td>
              <td>  
              <input type="file" (change)="onUploadChange($event)" class="" formControlName="uploaddocument"  [(ngModel)]="ImgName" >
              <span class="highlight"></span>
              <span class="bar"></span>
              <img src="{{imagename!=''?imagename:'assets/images/NoImage.png'}}" height="50px;" width="50px;" alt="" style="margin-top:10px"/>
              <errors [control]="candidate_document.controls.uploaddocument"></errors>

              </td>
             <td> <!--  <input type="submit" class="form-control"> -->
                <button class="btn btn-w-shadow no-rd" type="submit" [disabled]="!candidate_document.valid">Upload</button>
              </td>
            </tr>
          </tbody>
        </table>
        </form>
      </div>

      <div class="dash-head dash-head-2" *ngIf="getallducmentdata?.length > 0">
          <p>List of Docs</p>
        </div>
        <div class="table-responsive">
          <table  class="table table-bordered table-striped margin-top-20" *ngIf="getallducmentdata?.length > 0">
            <thead class="bg-info">
              <tr>
                <th>Type</th>
                <th>Date</th>
                <th>Uploaded Document</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let docs of getallducmentdata;let i = index">
                <td> 
                {{docs.documentName}}<p *ngIf="docs.otherDocName !=''">({{docs.otherDocName}})</p>
              </td>
                <td>
                    {{docs.begnningOfDate | date: 'dd/MM/yyyy' }}
                </td>
                
                <td> 
                    <a [href]="docs.image" target="_blank" *ngIf="docs.image"> <img src="{{docs.image!=''?docs.image:'assets/images/NoImage.png'}}" height="50px;" width="50px;" alt="" />
                    </a>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      
    </div>
  </div>
  <div class="cleafix"></div>
  <div class="modal-footer form-group text-right">
    <div class="col-md-12">
      <button type="button" class="btn btn-w-shadow no-rd" aria-label="Close" (click)="modalRef.hide()">
        Close
      </button>
    </div>
  </div>
</ng-template>
<ng-template #template2>
  <div class="modal-header">
    <h4 class="modal-title pull-left">Modal</h4>
    <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    No Records Founds......
  </div>
</ng-template>

